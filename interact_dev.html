<!DOCTYPE html>
<html>

<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
<title>Interactive Pendulum</title>
    <style>
        body,select,input { font: 20px Arial; }
        math { font-size: 1.5em; }
    </style>
</head>

<body onload='Body()'>

<h1>Interactive Pendulum</h1>

<p>
<math>
    <mi>a</mi>
    <mo>=</mo>
    <mfrac>
    <mrow>
    <mi>G</mi>
    <mo>&middot;</mo>
    <mi>M</mi>
    </mrow>
    <msup>
    <mi>r</mi>
    <mn>2</mn>
    </msup>
    </mfrac>
</math>
</p>

<p>
<math>
    <mi>T</mi>
    <mo>=</mo>
    <mn>2</mn>
    <mo>&middot;</mo>
    <mi>&pi;</mi>
    <msqrt>
        <mfrac>
            <mi>L</mi>
            <mi>a</mi>
        </mfrac>
    </msqrt>
</math>
</p>

<p>For a surprise, try selecting "Sun mass", "1 astronomical unit", "1 astronomical unit", and "years", below...</p>

<p>What mass is the source of your gravity?
<select id="gravity" onchange="Update();">
<option value="5.975e+24 kilogramm">Earth mass</option>
<option value="7.36e+22 kilogramm">Moon mass</option>
<option value="1.99e+30 kilogramm">Sun mass</option>
</select>
</p>

<p>
How far from the (assumed point) mass are you?
<select id="radius" onchange="Update();">
<option value="6378000 meter">Earth surface (3963.11 miles)</option>
<option value="1740000 meter">Moon surface (1081.19 miles)</option>
<option value="695000000 meter">Sun surface (431853 miles)</option>
<option value="1 au">1 astronomical unit (92955900 miles)</option>
</select>
</p>

<p>
What is the length of your pendulum?
<select id="length" onchange="Update();">
<option value="6 inch">6 inch</option>
<option value="1 foot">1 foot</option>
<option value="100 foot">100 foot</option>
<option value="1 au">1 astronomical unit</option>
<option value="other">other value with unit --&gt;</option>
</select>
<input id="otherlength" onchange="Update();">
</p>

<p>
What unit would you like the period expressed in?
<select id="unit" onchange="Update();">
<option value="seconds">seconds</option>
<option value="minutes">minutes</option>
<option value="hours">hours</option>
<option value="days">days</option>
<option value="years">years</option>
</select>
</p>

<p>
<input type="checkbox" id="show" onchange="Update();"> Show your work!
</p>


<p id='status'>loading database ...</p>
<p id='results'></p>

<script type="text/javascript" src="database_dev.js">
// import the database
// var database=...
</script>

<script type="text/javascript" src="engine_dev.js">
// import the engine
</script>

<script>

function Update()
{
    document.getElementById("status").innerHTML = "";

    var length;
    if (document.getElementById("length").value == "other") {
        document.getElementById("otherlength").disabled = false;
        // parse input to see if valid length
        length = document.getElementById("otherlength").value;
        if (! length.match(/[:?]/)) {
            var results = RunLine(length + ":[Length]");
            if (! results.success) {
                document.getElementById("status").innerHTML = results.output;
                return;
            }
        } else {
            document.getElementById("status").innerHTML = ": or ? not allowed here";
            return;
        }
    } else {
        document.getElementById("otherlength").disabled = true;
        length = document.getElementById("length").value;
    }

    var html = "";

    // compute the acceleration to the mass: G M/r^2
    var equation = "G " + document.getElementById("gravity").value + " / (" + document.getElementById("radius").value + ")^2 ?";
    var results = RunLine(equation);
    var accel;
    html += "<hr><br><b>" + equation + "</b>";
    html += "<br><i>" + (results.success?"success":"failure") + "</i>";
    for (var j = 0; j < results.output.length; j++) {
        html += "<br>" + results.output[j];
        accel = results.output[j].replace(/= /, "");
    }

    // compute the period of the pendulum: 2 pi sqrt(l/a)
    var equation = "2 pi sqrt(" + length + " / (" + accel + ")) ? " + document.getElementById("unit").value;
    var results = RunLine(equation);
    var period;
    html += "<hr><br><b>" + equation + "</b>";
    html += "<br><i>" + (results.success?"success":"failure") + "</i>";
    for (var j = 0; j < results.output.length; j++) {
        html += "<br>" + results.output[j];
        period = results.output[j].replace(/= /, "");
    }

    if (! document.getElementById("show").checked) {
        html = "";
    }

    html += "<hr><br><b> acceleration (a) is: " + accel + "</b>";
    html += "<br><b> period (T) is: " + period + "</b>";

    // display the demo results
    document.getElementById("results").innerHTML = html;

    if (period == "1.00043  years") {
        document.getElementById("surprise").hidden = false;
    } else {
        document.getElementById("surprise").hidden = true;
    }
}

function Body()
{
    document.getElementById("status").style.color = "red";

    try {
        // load the database
        loading = true;
        LoadDatabase(database);
        loading = false;

        Update();
    } catch (error) {
        document.getElementById("status").innerHTML = error;
        return;
    }
}

</script>

<hr>

<div id="surprise">
<p>Surprise!</p>
<p>How did we get from Keppler's Third Law of planetary motion:
<math>
    <mi>T</mi>
    <mo>=</mo>
    <mn>2</mn>
    <mo>&middot;</mo>
    <mi>&pi;</mi>
    <msqrt>
        <mfrac>
            <msup>
            <mi>r</mi>
            <mn>3</mn>
            </msup>
            <mrow>
            <mi>G</mi>
            <mo>&middot;</mo>
            <mi>M</mi>
            </mrow>
        </mfrac>
    </msqrt>
</math>
back to the period of a simple pendulum???</p>

<p>We also know:
<math>
    <mi>F</mi>
    <mo>=</mo>
    <mfrac>
        <mrow>
        <mi>G</mi>
        <mo>&middot;</mo>
        <mi>M</mi>
        <mo>&middot;</mo>
        <mi>m</mi>
        </mrow>
        <msup>
        <mi>r</mi>
        <mn>2</mn>
        </msup>
    </mfrac>
</math>
where "M" is the mass of the Sun and "m" is the mass of the Earth.
</p>

<p>And we know:
<math>
    <mi>F</mi>
    <mo>=</mo>
    <mi>m</mi>
    <mo>&middot;</mo>
    <msub>
    <mi>a</mi>
    <mi>earth</mi>
    </msub>
</math>
</p>

<p>So:
<math>
    <msub>
    <mi>a</mi>
    <mi>earth</mi>
    </msub>
    <mo>=</mo>
    <mfrac>
    <mrow>
    <mi>G</mi>
    <mo>&middot;</mo>
    <mi>M</mi>
    </mrow>
    <msup>
    <mi>r</mi>
    <mn>2</mn>
    </msup>
    </mfrac>
</math>
</p>

<p>Giving us:
<math>
    <mi>T</mi>
    <mo>=</mo>
    <mn>2</mn>
    <mo>&middot;</mo>
    <mi>&pi;</mi>
    <msqrt>
        <mfrac>
            <mi>r</mi>
            <mi>a</mi>
        </mfrac>
    </msqrt>
</math>
</p>

<p>Setting "r" to 1 au (the "length" of our Earth's "pendulum") and "a" to the acceleration experienced on Earth because of the Sun's gravity 1 au away takes care of the rest!!!</p>
</div>

</body>

</html>
